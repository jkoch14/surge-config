[General]
skip-proxy = 127.0.0.0/8, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, localhost, *.local
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
ipv6 = false // 如无特殊需求不应开启 IPv6，目前网络环境下 IPv6 只会带来问题。
geoip-maxmind-url = https://raw.githubusercontent.com/Hackl0us/GeoIP2-CN/release/Country.mmdb
ipv6-vif = disabled
show-error-page-for-reject = true
read-etc-hosts = true
internet-test-url = http://developer.google.cn/generate_204
proxy-test-url = http://latency-test.skk.moe/endpoint
proxy-test-udp = www.apple.com@8.8.8.8
vif-mode = v3
udp-priority = false
test-timeout = 5
loglevel = notify
dns-server = system
encrypted-dns-server = quic://223.5.5.5, quic://223.6.6.6, https://1.12.12.12/dns-query, https://120.53.53.53/dns-query
use-local-host-item-for-proxy = true
include-all-networks = true
include-local-networks = false
exclude-simple-hostnames = true
disable-geoip-db-auto-update = true

[Proxy]

Msia wgcf = wireguard, section-name=server, ecn=true



WireGuard = wireguard, section-name=F16491DD, test-url=http://1.0.0.1/generate_204, ecn=true


[Proxy Group]

PROXY = select, DIRECT, "Msia wgcf", WireGuard, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/crossutility/Quantumult-X/master/icon-samples/us.PNG

# 下载配置文件后请自行把https://sub.store/download/collection/MySub替换为你自己的机场订阅链接或Sub-Store订阅链接
BackCN = select, DIRECT, icon-url=https://raw.githubusercontent.com/crossutility/Quantumult-X/master/icon-samples/cn.PNG, no-alert=0, hidden=0, include-all-proxies=0, persistent=1

[Rule]





// Netease Music
# AND,((USER-AGENT,%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90*), (NOT,((DOMAIN-SUFFIX,music.126.net)))),REJECT
# AND,((USER-AGENT,NeteaseMusic*), (NOT,((DOMAIN-SUFFIX,music.163.com)))),REJECT
# USER-AGENT,neteasemusic*,REJECT
DOMAIN-SET,https://raw.githubusercontent.com/jkoch14/rules/refs/heads/main/Conf/Spec/Surge/ruleset/custom-domain.txt,BackCN

DOMAIN-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/private.txt,DIRECT
DOMAIN-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/reject.txt,REJECT
RULE-SET,SYSTEM,DIRECT
DOMAIN-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/icloud.txt,DIRECT
DOMAIN-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/apple.txt,DIRECT
DOMAIN-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/google.txt,DIRECT
DOMAIN-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/proxy.txt,PROXY,extended-matching
DOMAIN-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/direct.txt,DIRECT
RULE-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/telegramcidr.txt,PROXY
RULE-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/cncidr.txt,DIRECT
RULE-SET,LAN,DIRECT
FINAL,PROXY,dns-failed

[Host]
# server = douyin.com
# apple.com = 17.253.144.10
# gateway.icloud.com = 17.248.199.64
# > Google Dl
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29
# > 阿里云
# > 腾迅
*.tencent.com = server:119.29.29.29
# > 腾讯QQ
*.qq.com = server:119.29.29.29
# > 微信
*.weixin.com = server:119.29.29.29
*.qpic.cn = server:119.29.29.29
# > 网易
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29

[URL Rewrite]

http://interface.music.163.com/eapi/ad - reject
http://iadmusicmat.music.126.net/.*jpg$ - reject
http://p.c.music.126.net/.*jpg$ - reject

[SSID Setting]
TYPE:CELLULAR tfo-behaviour=force-disabled, dns-server="system", encrypted-dns-server="off"
TYPE:WIFI tfo-behaviour=force-enabled

[MITM]
skip-server-cert-verify = true
h2 = true
hostname = gateway.icloud.com, interface.music.163.com
hostname-disabled = gateway.icloud.com
ca-passphrase = 9B3650CB
ca-p12 = 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

[Script]

# testflight
TestFlight下载修正 = type=http-request,pattern=^https?:\/\/testflight\.apple\.com\/v\d\/accounts\/.+?\/install$,requires-body=1,max-size=0,script-path=https://gist.githubusercontent.com/NobyDa/9be418b93afc5e9c8a8f4d28ae403cf2/raw/TF_Download.js
抖音去广告 = type=http-response,pattern=^https?:\/\/.*\.amemv\.com\/aweme\/v1\/(feed|mix\/aweme|aweme\/post|(multi\/)?aweme\/detail|follow\/feed|nearby\/feed|search\/item|general\/search\/single|hot\/search\/video\/list)\/,requires-body=1,max-size=-1,script-path=https://Choler.github.io/Surge/Script/douyin.js
YouTube去广告 = type=http-request,pattern=^https?:\/\/.+?\.googlevideo\.com\/.+&(oad|ctier)=(?!A),script-path=https://choler.github.io/Surge/Script/YouTube.js

[WireGuard F16491DD]
private-key = kGHfJBcGlxExvXst8w8USmqxDsiUoxV7qMgkjIH/FUU=
self-ip = 172.16.0.2
self-ip-v6 = 2606:4700:cf1:1000::25
dns-server = 1.1.1.1
mtu = 1280
peer = (public-key = bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=, allowed-ips = "0.0.0.0/0, ::0/0", endpoint = 162.159.193.10:2408, keepalive = 25, client-id = 88/243/13)

[WireGuard server]
private-key = WEsCqT0xHT0O0c2TGo62X+kkcBuRZm/qwhT5hihO+Vg=
self-ip = 172.16.0.2
self-ip-v6 = 2606:4700:cf1:1000::29
prefer-ipv6 = true
dns-server = 1.1.1.1
mtu = 1280
peer = (public-key = bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=, allowed-ips = "0.0.0.0/0, ::0/0", endpoint = 162.159.193.10:2408, keepalive = 25, client-id = 189/77/48)
